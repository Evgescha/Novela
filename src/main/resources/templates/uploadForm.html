<html xmlns:th="https://www.thymeleaf.org">
<head>
<title>Upload</title>
<meta th:replace="~{commons :: head}"></meta>
<link
	href="/forPages/fileinput/fileinput.min.css"
	media="all" rel="stylesheet" type="text/css" />
<script
	src="/forPages/fileinput/fileinput.min.js"
	type="text/javascript"></script>
<script
	src="/forPages/fileinput/theme.min.js"
	type="text/javascript"></script>
<style type="text/css">
.main-section {
	margin: 0 auto;
	padding: 20px;
	margin-top: 100px;
	background-color: #fff;
	box-shadow: 0px 0px 20px #c1c1c1;
	height: 50%;
}

.fileinput-remove, .fileinput-upload {
	display: none;
}
</style>
</head>
<body>

	<div th:if="${message}">
		<h2 th:text="${message}" />
	</div>

	<div>
		<form method="POST" enctype="multipart/form-data" action="/upload">
			<table>
				<tr>
					<td>Select the game:</td>
					<td><select id="res_gameSelect" type="text" name="game">
							<option th:value="${game.title}" th:each="game:${games}"
								th:text="${game.title}">GameName</option>
					</select></td>
				</tr>
				<tr>
					<td>Select resources type</td>
					<td><select id="res_typeResSelect" name="type">
							<option value="backgroundImages">BackgroundImages</option>
							<option value="specialImages">SpecialImages</option>
							<option value="characterImages">Characters</option>
							<option value="musicSound">MusicSound</option>
							<option value="sfxSound">SfxSound</option>
							<option value="ambienceSound">AmbienceSound</option>
					</select></td>
				</tr>
				<tr>
					<td>Имя персонажа</td>
					<td><input type="text" name="charName" id="res_charName" /></td>
				</tr>
				<tr>
					<td>
						<div class="form-group">
							<div class="file-loading">
								<input id="file-1" type="file" multiple class="file"
									data-overwrite-initial="false" 
									name="files">
							</div>
						</div>
					</td>
					<td></td>
				</tr>
				<tr>
					<td></td>
					<td><input type="submit" value="Upload" /></td>
				</tr>
			</table>
		</form>
	</div>



	<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
	<script
		src="/js/fileinput.js"
		type="text/javascript"></script>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.4.7/themes/fa/theme.js"
		type="text/javascript"></script>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"
		type="text/javascript"></script>
	<script
		src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js"
		type="text/javascript"></script>
	<script type="text/javascript">

	$('#res_charName').prop('disabled', true);
	$('#res_typeResSelect').change(function(){
		if ($('#res_typeResSelect').val()!="characterImages")
			$('#res_charName').prop('disabled', true);
		else 
			$('#res_charName').prop('disabled', false);
	});
	
		$("#file-1").fileinput({
			theme : 'fa',
			uploadUrl : '/upload',
			allowedFileExtensions : [ 'jpg', 'png','ogg' ],
			overwriteInitial : false,
			maxFileSize : 10000,
			maxFilesNum : 25,
			slugCallback : function(filename) {
				return filename.replace('(', '_').replace(']', '_');
			}
		});
	</script>
</body>
</html>